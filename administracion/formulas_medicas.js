function mostrar_formulario_flotante(_1){if(_1==1){$("#fondo_negro").css("display","block");$("#d_centro").slideDown(400).css("display","block");}else{if(_1==0){$("#fondo_negro").css("display","none");$("#d_centro").slideDown(400).css("display","none");}}};function reducir_formulario_flotante(_2,_3){$(".div_centro").width(_2);$(".div_centro").css("top","20%");$(".div_interno").width(_2);};function mostrar_formulario(_4){if(_4==1){$(".formulario").slideDown(600).css("display","block");}else{if(_4==0){$(".formulario").slideUp(600).css("display","none");}}};function cargar_formulas(_5){var _6="opcion=1&txt_buscar_formula="+str_encode(_5);llamarAjax("formulas_medicas_ajax.php",_6,"principal_formulas","mostrar_formulario(1)");};function buscar_formulas(){$("#frm_listado_formulas").validate({rules:{txt_buscar_formula:{required:true,}},submitHandler:function(){cargar_formulas($("#txt_buscar_formula").val());return false;},});};function llamar_crear_formula(){var _7="opcion=2";llamarAjax("formulas_medicas_ajax.php",_7,"principal_formulas","mostrar_formulario(1)");};function seleccionar_formula(_8){var _9="opcion=2&id_formula_med="+$("#hdd_id_formula_med_"+_8).val();llamarAjax("formulas_medicas_ajax.php",_9,"principal_formulas","mostrar_formulario(1);");};function seleccionar_convenio(_a){var _b="opcion=3&id_convenio="+_a;llamarAjax("formulas_medicas_ajax.php",_b,"d_planes","");};function agregar_diagnostico(){var _c=parseInt($("#hdd_cont_cx").val(),10);if(_c<50){$("#tr_cx_"+_c).css("display","table-row");$("#hdd_cont_cx").val(_c+1);}else{alert("Se ha alcanzado el l?mite de diagn?sticos");}};function borrar_diagnostico(_d){$("#hdd_cod_ciex_"+_d).val("");$("#td_cx_"+_d).html("");$("#tr_cx_"+_d).css("display","none");};function mostrar_buscar_diagnostico(_e){mostrar_formulario_flotante(1);posicionarDivFlotante("d_centro");$("#d_interno").html("<table border=\"0\" cellpadding=\"5\" cellspacing=\"0\" align=\"center\" style=\"width:100%\">"+"<tr>"+"<td align=\"center\" colspan=\"2\"><h4>Buscar Diagn&oacute;sticos</h4></td>"+"</tr>"+"<tr>"+"<td align=\"center\" style=\"width:90%\">"+"<input type=\"text\" name=\"txt_busca_diagnostico\" id=\"txt_busca_diagnostico\" placeholder=\"Buscar diagn&oacute;stico\">"+"</td>"+"<td align=\"center\" style=\"width:10%\">"+"<input type=\"button\" id=\"btn_buscar_diagnostico\" nombre=\"btn_buscar_diagnostico\" value=\"Buscar\" class=\"btnPrincipal peq\" onclick=\"buscar_diagnostico("+_e+");\"/> "+"</td>"+"</tr>"+"</table>"+"<div id=\"d_buscar_diagnosticos\"></div>");};function buscar_diagnostico(_f){var _10="opcion=4&indice="+_f+"&txt_busca_diagnostico="+str_encode($("#txt_busca_diagnostico").val());llamarAjax("formulas_medicas_ajax.php",_10,"d_buscar_diagnosticos","");};function seleccionar_diagnostico_ciex(_11,_12,_13){$("#hdd_cod_ciex_"+_13).val(_11);$("#td_cx_"+_13).html(_11+" - "+_12);mostrar_formulario_flotante(0);};function agregar_ftexto(){var _14=parseInt($("#hdd_cont_ftexto").val(),10);if(_14<50){$("#tr_ftexto_"+_14).css("display","table-row");$("#hdd_cont_ftexto").val(_14+1);}else{alert("Se ha alcanzado el l?mite de detalle");}};function borrar_ftexto(_15){$("#txt_desc_texto_"+_15).val("");$("#tr_ftexto_"+_15).css("display","none");};function validar_crear_formula(){var _16=true;$("#contenedor_error").css("display","none");var _17=parseInt($("#hdd_cont_cx").val(),10);var _18=false;for(var i=0;i<_17;i++){$("#td_cx_"+i).removeClass("bordeAdmision");if($("#tr_cx_"+i).is(":visible")){_18=true;}}if(!_18){agregar_diagnostico();_17++;}var _19=parseInt($("#hdd_cont_ftexto").val(),10);_18=false;for(var i=0;i<_19;i++){$("#txt_desc_texto_"+i).removeClass("bordeAdmision");if($("#tr_ftexto_"+i).is(":visible")){_18=true;}}if(!_18){agregar_ftexto();_19++;}for(var i=0;i<_17;i++){if($("#tr_cx_"+i).is(":visible")&&$("#hdd_cod_ciex_"+i).val()==""){$("#td_cx_"+i).addClass("bordeAdmision");_16=false;}}for(var i=0;i<_19;i++){if($("#tr_ftexto_"+i).is(":visible")&&$("#txt_desc_texto_"+i).val()==""){$("#txt_desc_texto_"+i).addClass("bordeAdmision");_16=false;}}return _16;};function crear_formula(){if(validar_crear_formula()){var _1a="opcion=5&id_convenio="+$("#cmb_convenio").val()+"&id_plan="+$("#cmb_plan").val();var _1b=0;var _1c=parseInt($("#hdd_cont_cx").val(),10);for(var i=0;i<_1c;i++){if($("#tr_cx_"+i).is(":visible")){_1a+="&cod_ciex_"+_1b+"="+$("#hdd_cod_ciex_"+i).val();_1b++;}}_1a+="&cant_cx="+_1b;_1b=0;var _1d=parseInt($("#hdd_cont_ftexto").val(),10);for(var i=0;i<_1d;i++){if($("#tr_ftexto_"+i).is(":visible")){_1a+="&desc_texto_"+_1b+"="+str_encode($("#txt_desc_texto_"+i).val());_1b++;}}_1a+="&cant_ftexto="+_1b;llamarAjax("formulas_medicas_ajax.php",_1a,"d_guardar_formulas","terminar_crear_formula();");}else{$("#contenedor_error").css("display","block");$("#contenedor_error").html("Los campos marcados en rojo son obligatorios");}};function terminar_crear_formula(){var _1e=$("#hdd_resul_guardar_formula").val();if(_1e>0){$("#contenedor_exito").css("display","block");$("#contenedor_exito").html("F&oacute;rmula m&eacute;dica guardada con &eacute;xito");setTimeout("$(\"#contenedor_exito\").css(\"display\", \"none\")",3000);cargar_formulas($("#txt_buscar_formula").val());}else{if(_1e=="-3"){$("#contenedor_error").css("display","block");$("#contenedor_error").html("Error - La f&oacute;rmula m&eacute;dica ya existe");}else{$("#contenedor_error").css("display","block");$("#contenedor_error").html("Error interno al tratar de guardar la f&oacute;rmula m&eacute;dica");}}};function editar_formula(){if(validar_crear_formula()){var _1f="opcion=6&id_formula_med="+$("#hdd_id_formula_med").val()+"&id_convenio="+$("#cmb_convenio").val()+"&id_plan="+$("#cmb_plan").val();if($("#chk_activo").is(":checked")){_1f+="&ind_activo=1";}else{_1f+="&ind_activo=0";}var _20=0;var _21=parseInt($("#hdd_cont_cx").val(),10);for(var i=0;i<_21;i++){if($("#tr_cx_"+i).is(":visible")){_1f+="&cod_ciex_"+_20+"="+$("#hdd_cod_ciex_"+i).val();_20++;}}_1f+="&cant_cx="+_20;_20=0;var _22=parseInt($("#hdd_cont_ftexto").val(),10);for(var i=0;i<_22;i++){if($("#tr_ftexto_"+i).is(":visible")){_1f+="&desc_texto_"+_20+"="+str_encode($("#txt_desc_texto_"+i).val());_20++;}}_1f+="&cant_ftexto="+_20;llamarAjax("formulas_medicas_ajax.php",_1f,"d_guardar_formulas","terminar_crear_formula();");}else{$("#contenedor_error").css("display","block");$("#contenedor_error").html("Los campos marcados en rojo son obligatorios");}};function validar_exito(){var _23=$("#hdd_exito").val();$(".formulario").css("display","none");if(_23>0){$("#contenedor_exito").css("display","block");$("#contenedor_exito").html("Datos guardados correctamente");setTimeout("$('#contenedor_exito').slideUp(200).css('display', 'none')",5000);}else{$("#contenedor_error").css("display","block");$("#contenedor_error").html("Error al guardar usuarios");setTimeout("$('#contenedor_error').slideUp(200).css('display', 'none')",5000);}};function volver_inicio(){cargar_formulas($("#txt_buscar_formula").val());};function crear_usuarios(){var _24=$("#txt_nombre_usuario").val();var _25=$("#txt_apellido_usuario").val();var _26=$("#cmb_tipo_documento").val();var _27=$("#txt_numero_documento").val();var _28=$("#txt_usuario").val();var _29=$("#txt_clave").val();var _2a=new Array();$("input[name='check_pefiles']:checked").each(function(){_2a.push($(this).val());});var _2b="opcion=4&txt_nombre_usuario="+_24+"&txt_apellido_usuario="+_25+"&cmb_tipo_documento="+_26+"&txt_numero_documento="+_27+"&txt_usuario="+_28+"&txt_clave="+_29+"&array_perfiles="+_2a;llamarAjax("formulas_medicas_ajax.php",_2b,"principal_usuarios","validar_exito(); volver_inicio()");};function editar_usuarios(){var _2c=$("#txt_nombre_usuario").val();var _2d=$("#txt_apellido_usuario").val();var _2e=$("#cmb_tipo_documento").val();var _2f=$("#txt_numero_documento").val();var _30=$("#hdd_id_usuario").val();var _31=$("#check_estado").is(":checked")?1:0;var _32=new Array();$("input[name='check_pefiles']:checked").each(function(){_32.push($(this).val());});var _33="opcion=6&txt_nombre_usuario="+_2c+"&txt_apellido_usuario="+_2d+"&cmb_tipo_documento="+_2e+"&txt_numero_documento="+_2f+"&array_perfiles="+_32+"&hdd_id_usuario="+_30+"&check_estado="+_31;llamarAjax("formulas_medicas_ajax.php",_33,"principal_usuarios","cerrar_div_centro(); validar_exito(); volver_inicio()");};function confirmar_guardar(){$("#d_interno").html("<table border=\"0\" cellpadding=\"5\" cellspacing=\"0\" align=\"center\" style=\"width:100%\">"+"<tr>"+"<th align=\"center\">"+"<h4>&iquest;Est&aacute; seguro de guardar esta informaci&oacute;n?</h4>"+"</th>"+"</tr>"+"<tr>"+"<th align=\"center\">"+"<input type=\"button\" id=\"btn_cancelar_si\" nombre=\"btn_cancelar_si\" class=\"btnPrincipal\" value=\"Aceptar\" onclick=\"editar_usuarios();\"/>\n"+"<input type=\"button\" id=\"btn_cancelar_no\" nombre=\"btn_cancelar_no\" class=\"btnSecundario\" value=\"Cancelar\" onclick=\"cerrar_div_centro();\"/> "+"</th>"+"</tr>"+"</table>");};