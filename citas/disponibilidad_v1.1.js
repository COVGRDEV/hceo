$(function(){$(".paginated","table").each(function(i){$(this).text(i+1);});$("table.paginated").each(function(){var _1=0;var _2=10;var _3=$(this);_3.bind("repaginate",function(){_3.find("tbody tr").hide().slice(_1*_2,(_1+1)*_2).show();});_3.trigger("repaginate");var _4=_3.find("tbody tr").length;var _5=Math.ceil(_4/_2);var _6=$("<div class=\"pager\"></div>");for(var _7=0;_7<_5;_7++){$("<span class=\"page-number\"></span>").text(_7+1).bind("click",{newPage:_7},function(_8){_1=_8.data["newPage"];_3.trigger("repaginate");$(this).addClass("active").siblings().removeClass("active");}).appendTo(_6).addClass("clickable");}_6.insertBefore(_3).find("span.page-number:first").addClass("active");});});function disponibilidad(id,_9,_a,_b){var _c=id;if(_a===undefined){_a="";}if(_b===undefined){_b="";}var _d="opcion=1&idusuario="+_c+"&profesional="+_9+"&mes="+_a+"&ano="+_b;llamarAjax("disponibilidad_ajax.php",_d,"d_disponibilidad","");};function calendario(_e,_f){var _10=$("#hdd_id_usuario").val();var _11="opcion=2&mes="+_e+"&anio="+_f+"&hdd_id_usuario="+_10;llamarAjax("disponibilidad_ajax.php",_11,"agenda","");};function guardar_disponibilidad(_12,mes,dia){var _13=$("#cmbDisponibilidad"+dia+"").val();var _14=$("#cmb_lugar_disp_"+dia+"").val();var _15=$("#hdd_id_usuario").val();var _16="opcion=3&opCombo="+_13+"&lugar_disp="+_14+"&anio="+_12+"&mes="+mes+"&dia="+dia+"&hdd_id_usuario="+_15;llamarAjax("disponibilidad_ajax.php",_16,"hdd_pa_rta","guardar_disponibilidad_accion("+_12+","+mes+","+dia+","+_13+");");};function guardar_disponibilidad_accion(_17,mes,dia,_18){var _19=parseInt($("#rta_crearDisponibilidadProf").val(),10);switch(_19){case 1:$("#hdd_tipo_disponibilidad_"+dia).val($("#cmbDisponibilidad"+dia).val());switch(_18){case 13:$("#d_dia_"+dia+"").attr("class","no_disponible");$("#btn_asignar_parcial_"+dia).remove();$("#cmbDisponibilidad"+dia).css("width","117px");break;case 11:$("#d_dia_"+dia+"").attr("class","completa");$("#btn_asignar_parcial_"+dia).remove();$("#cmbDisponibilidad"+dia).css("width","117px");break;case 12:$("#d_dia_"+dia+"").attr("class","parcial");configurar_disponibilidad(_17,mes,dia,$("#cmb_lugar_disp_"+dia).val());break;}break;case -3:alert("Hay citas asignadas a la fecha seleccionada, por favor revise la secci?n de citas");$("#cmbDisponibilidad"+dia).val($("#hdd_tipo_disponibilidad_"+dia).val());break;default:alert("Error interno al realizar el cambio ("+_19+")");$("#cmbDisponibilidad"+dia).val($("#hdd_tipo_disponibilidad_"+dia).val());break;}};function configurar_disponibilidad(_1a,mes,dia,_1b){var _1c=$("#hdd_id_usuario").val();var _1d=$("#profesional").html();var _1e=$(".encabezado table tr td:eq(1) h2").html();var _1f=$("#hdd_id_disponibilidad_"+dia).val();var _20="opcion=4&idusuario="+_1c+"&id_disponibilidad="+_1f+"&anio="+_1a+"&mes="+mes+"&dia="+dia+"&profesional="+_1d+"&name_mes="+_1e+"&id_lugar_disp="+_1b;llamarAjax("disponibilidad_ajax.php",_20,"d_disponibilidad","");};function validar_guardar_disp_det(){if($("#cmb_hinicio option:selected").val()=="-1"&&$("#cmb_hfinal option:selected").val()=="-1"&&$("#cmb_hinicio2 option:selected").val()=="-1"&&$("#cmb_hfinal2 option:selected").val()=="-1"){alert("Debe seleccionar un rango de horas");return;}if($("#cmb_hinicio option:selected").val()=="-1"&&$("#cmb_hfinal option:selected").val()!="-1"){alert("La hora de inicio no debe ser vac?a");return;}if($("#cmb_hinicio option:selected").val()!="-1"&&$("#cmb_hfinal option:selected").val()=="-1"){alert("La hora final no debe ser vac?a");return;}if($("#cmb_hinicio option:selected").val()!="-1"&&$("#cmb_lugar_disp_parc option:selected").val()=="-1"){alert("El lugar no debe ser vac?o");return;}if($("#cmb_hinicio2 option:selected").val()=="-1"&&$("#cmb_hfinal2 option:selected").val()!="-1"){alert("La segunda hora de inicio no debe ser vac?a");return;}if($("#cmb_hinicio2 option:selected").val()!="-1"&&$("#cmb_hfinal2 option:selected").val()=="-1"){alert("La segunda hora final no debe ser vac?a");return;}if($("#cmb_hinicio2 option:selected").val()!="-1"&&$("#cmb_lugar_disp_parc2 option:selected").val()=="-1"){alert("El segundo lugar no debe ser vac?o");return;}if($("#cmb_hinicio option:selected").val()!="-1"&&$("#cmb_hfinal option:selected").val()!="-1"){var _21=$("#cmb_hinicio option:selected").val();var _22=$("#cmb_hfinal option:selected").val();if(_21==_22){alert("La hora inicial no puede ser igual a la hora final");return;}if(_21>_22){alert("La hora inicial no puede ser mayor a la hora final");return;}}if($("#cmb_hinicio2 option:selected").val()!="-1"&&$("#cmb_hfinal2 option:selected").val()!="-1"){var _21=$("#cmb_hinicio2 option:selected").html();var _22=$("#cmb_hfinal2 option:selected").html();if(_21==_22){alert("La hora inicial no puede ser igual a la hora final");return;}if(_21>_22){alert("La hora inicial no puede ser mayor a la hora final");return;}}guardar_disponibilidad_prof_det();};function guardar_disponibilidad_prof_det(){var _23=$("#cmb_hinicio option:selected").val();var _24=$("#cmb_hfinal option:selected").val();var _25=$("#cmb_lugar_disp_parc option:selected").val();var _26=$("#cmb_hinicio2 option:selected").val();var _27=$("#cmb_hfinal2 option:selected").val();var _28=$("#hdd_fecha_cal").val();var _29=$("#hdd_id_usuario").val();var _2a=$("#cmb_lugar_disp_parc2 option:selected").val();var _2b="opcion=5&fechaInicio="+_23+"&fechaFinal= "+_24+"&lugarDisp="+_25+"&fechaInicio2= "+_26+"&fechaFinal2= "+_27+"&lugarDisp2="+_2a+"&fecha_cal="+_28+"&hdd_id_usuario="+_29;llamarAjax("disponibilidad_ajax.php",_2b,"d_cmb","guardar_disponibilidad_prof_det_rta();");};function guardar_disponibilidad_prof_det_rta(){var rta=$("#hdd_pa_rta").val();var id=$("#hdd_id_usuario").val();var _2c=$("#hdd_mes_sel").val();var _2d=$("#hdd_ano_sel").val();if(rta=="-3"){alert("Hay citas asignadas a la fecha seleccionada, por favor revise la secci?n de citas");disponibilidad(id,"",_2c,_2d);}else{if(rta=="1"){display_contenedor_exito(1,"El registro se ha guardado de forma exitosa");display_contenedor_exito(0,"");disponibilidad(id,"",_2c,_2d);}}};function display_contenedor_exito(_2e,_2f){if(_2e==0){setTimeout("$('#contenedor_exito').slideUp(200).css('display', 'none')",4000);}else{if(_2e==1){$("#contenedor_exito").slideDown(200).css("display","block");$("#contenedor_exito").html(_2f);}}};function display_contenedor_error(_30,_31){if(_30==0){setTimeout("$('#contenedor_error').slideUp(200).css('display', 'none')",4000);}else{if(_30==1){$("#contenedor_error").slideDown(200).css("display","block");$("#contenedor_error").html(_31);}}};function regresar_disponibilidad(){var _32="opcion=6";llamarAjax("disponibilidad_ajax.php",_32,"d_disponibilidad","");};function chocorramo(){$("#cmb_hinicio").val("09:30");};function validar_aplicar_disponibilidad_mes(){mostrar_formulario_flotante(1);reducir_formulario_flotante(400,250);posicionarDivFlotante("d_centro");confirmar_aplicar_disponibilidad_mes();};function confirmar_aplicar_disponibilidad_mes(){$("#d_interno").html("<table border=\"0\" cellpadding=\"5\" cellspacing=\"0\" align=\"center\" style=\"width:100%\">"+"<tr>"+"<th align=\"center\">"+"<h4>&iquest;Est&aacute; seguro de guardar esta informaci&oacute;n?</h4>"+"</th>"+"</tr>"+"<tr>"+"<th align=\"center\">"+"<input type=\"button\" id=\"btn_cancelar_si\" nombre=\"btn_cancelar_si\" class=\"btnPrincipal\" value=\"Aceptar\" onclick=\"aplicar_disponibilidad_mes();\"/>\n"+"<input type=\"button\" id=\"btn_cancelar_no\" nombre=\"btn_cancelar_no\" class=\"btnSecundario\" value=\"Cancelar\" onclick=\"cerrar_div_centro();\"/> "+"</th>"+"</tr>"+"</table>");};function aplicar_disponibilidad_mes(){var _33="opcion=7&id_usuario_prof="+$("#hdd_id_usuario").val()+"&id_tipo_disponibilidad="+$("#cmb_disponibilidad_mes").val()+"&id_lugar_disp="+$("#cmb_lugar_disp_mes").val()+"&mes="+$("#hdd_mes_sel").val()+"&ano="+$("#hdd_ano_sel").val();llamarAjax("disponibilidad_ajax.php",_33,"d_guardar_disponibilidad","terminar_aplicar_disponibilidad_mes()");};function terminar_aplicar_disponibilidad_mes(){var rta=$("#hdd_resultado_mes").val();var id=$("#hdd_id_usuario").val();var _34=$("#hdd_mes_sel").val();var _35=$("#hdd_ano_sel").val();cerrar_div_centro();if(rta>0){display_contenedor_exito(1,"Disponibilidades del mes actualizadas con &eacute;xito");display_contenedor_exito(0,"");disponibilidad(id,"",_34,_35);}else{display_contenedor_error(1,"Error interno al registrar las disponibilidades");display_contenedor_error(0,"");}};function validar_duplicar_disp_ult_semana(){mostrar_formulario_flotante(1);reducir_formulario_flotante(400,250);posicionarDivFlotante("d_centro");confirmar_duplicar_disp_ult_semana();};function confirmar_duplicar_disp_ult_semana(){$("#d_interno").html("<table border=\"0\" cellpadding=\"5\" cellspacing=\"0\" align=\"center\" style=\"width:100%\">"+"<tr>"+"<th align=\"center\">"+"<h4>&iquest;Est&aacute; seguro de guardar esta informaci&oacute;n?</h4>"+"</th>"+"</tr>"+"<tr>"+"<th align=\"center\">"+"<input type=\"button\" id=\"btn_cancelar_si\" nombre=\"btn_cancelar_si\" class=\"btnPrincipal\" value=\"Aceptar\" onclick=\"duplicar_disp_ult_semana();\"/>\n"+"<input type=\"button\" id=\"btn_cancelar_no\" nombre=\"btn_cancelar_no\" class=\"btnSecundario\" value=\"Cancelar\" onclick=\"cerrar_div_centro();\"/> "+"</th>"+"</tr>"+"</table>");};function duplicar_disp_ult_semana(){var _36="opcion=8&id_usuario_prof="+$("#hdd_id_usuario").val()+"&mes="+$("#hdd_mes_sel").val()+"&ano="+$("#hdd_ano_sel").val();llamarAjax("disponibilidad_ajax.php",_36,"d_guardar_disponibilidad","terminar_duplicar_disp_ult_semana()");};function terminar_duplicar_disp_ult_semana(){var rta=$("#hdd_resultado_semana").val();var id=$("#hdd_id_usuario").val();var _37=$("#hdd_mes_sel").val();var _38=$("#hdd_ano_sel").val();cerrar_div_centro();if(rta>0){display_contenedor_exito(1,"Disponibilidades de la &uacute;ltima semana duplicada con &eacute;xito");display_contenedor_exito(0,"");disponibilidad(id,"",_37,_38);}else{if(rta==0){display_contenedor_error(1,"No hay d&iacute;as por configurar en el mes o no hay semanas para duplicar");display_contenedor_error(0,"");}else{display_contenedor_error(1,"Error interno al registrar las disponibilidades");display_contenedor_error(0,"");}}};