$(document).ready(function(){mostrar_tipos_citas();});function mostrar_tipos_citas(){$("#contenedor_error").css("display","none");$("#contenedor_exito").css("display","none");$("#txtParametro").val("");var _1="opcion=1&parametro=-1";llamarAjax("tipos_citas_ajax.php",_1,"reporte_citas","");};function buscarTipoCita(){$("#frmBuscarTipoCita").validate({rules:{txtParametro:{required:true,},},submitHandler:function(){$("#contenedor_error").css("display","none");$("#contenedor_exito").css("display","none");var _2=$("#txtParametro").val();var _3="opcion=1&parametro="+str_encode(_2);llamarAjax("tipos_citas_ajax.php",_3,"reporte_citas","");return false;},});};function nuevoTipoCita(){var _4="opcion=2";llamarAjax("tipos_citas_ajax.php",_4,"d_interno","mostrar_formulario_flotante(1);postNuevoTipoCita();");};function postNuevoTipoCita(){$("#cmb_tipos_registros_hc").attr("disabled","disabled");};function validar_tipo_cita(){if($("#txt_nombre_tipo_cita").val()==""){alert("Debe ingresar el nombre del tipo de cita");return false;}if($("#chk_preqx").is(":checked")&&$("#cmb_tipo_reg_cx").val()==""){alert("Debe seleccionar el tipo de registro prequir?rgico");return false;}return true;};function guardarNuevoTipoCita(){if(validar_tipo_cita()){var _5=str_encode($("#txt_nombre_tipo_cita").val());var _6=$("#chk_activo").is(":checked")?1:0;var _7=$("#chk_preconsulta").is(":checked")?1:0;var _8=$("#chk_examenes").is(":checked")?1:0;var _9=$("#chk_signos_vitales").is(":checked")?1:0;var _a=$("#chk_preqx").is(":checked")?1:0;var _b="";if($("#chk_preqx").is(":checked")){_b=$("#cmb_tipo_reg_cx").val();}var _c="opcion=3&accion=0&id_tipo_cita="+"&nombre_tipo_cita="+_5+"&ind_activo="+_6+"&ind_preconsulta="+_7+"&ind_examenes="+_8+"&ind_signos_vitales="+_9+"&ind_preqx="+_a+"&id_tipo_reg_cx="+_b;llamarAjax("tipos_citas_ajax.php",_c,"d_guardar_tipo_cita","validar_crear_modificar_tipo_cita();");}};function modificaTipoCita(){if(validar_tipo_cita()){var _d=str_encode($("#txt_nombre_tipo_cita").val());var _e=$("#chk_activo").is(":checked")?1:0;var _f=$("#chk_preconsulta").is(":checked")?1:0;var _10=$("#chk_examenes").is(":checked")?1:0;var _11=$("#chk_signos_vitales").is(":checked")?1:0;var _12=$("#chk_preqx").is(":checked")?1:0;var _13="";if($("#chk_preqx").is(":checked")){_13=$("#cmb_tipo_reg_cx").val();}var _14="opcion=3&accion=1&id_tipo_cita="+$("#hdd_id_tipo_cita").val()+"&nombre_tipo_cita="+_d+"&ind_activo="+_e+"&ind_preconsulta="+_f+"&ind_examenes="+_10+"&ind_signos_vitales="+_11+"&ind_preqx="+_12+"&id_tipo_reg_cx="+_13;llamarAjax("tipos_citas_ajax.php",_14,"d_guardar_tipo_cita","validar_crear_modificar_tipo_cita();");}};function validar_crear_modificar_tipo_cita(){var _15=parseInt($("#hdd_resultado_guardar").val(),10);mostrar_formulario_flotante(0);if(_15>0){mostrar_tipos_citas();$("#contenedor_exito").css({"display":"block"});$("#contenedor_exito").html("Registro guardado con &eacute;xito");}else{$("#contenedor_error").css({"display":"block"});$("#contenedor_error").html("Error interno al guardar el registro");}window.scrollTo(0,0);};function tiposCitaDetalle(_16,_17){var _18="opcion=5&idTipoCita="+_16+"&idTipoRegistro="+_17;llamarAjax("tipos_citas_ajax.php",_18,"d_interno","mostrar_formulario_flotante(1);verificaIconoBorrarProcedimiento();");};function verificaIconoBorrarProcedimiento(){var _19=$("#hdd_Procedimiento").val();if(_19==""){ocultaBtnEliminarProcedimiento();}};function tiposCitaDetalleNuevo(_1a){var _1b="opcion=11&idTipoCita="+_1a;llamarAjax("tipos_citas_ajax.php",_1b,"d_interno","mostrar_formulario_flotante(1);");};function seleccionarProcedimiento(_1c){if(_1c==1){$("#fondo_negro_procedimientos").css("display","block");$("#d_centro_procedimientos").slideDown(400).css({"display":"block","z-index":"10"});$("#d_interno_procedimientos").css({"min-height":"470px"});var _1d="opcion=6";llamarAjax("tipos_citas_ajax.php",_1d,"d_interno_procedimientos","");}else{if(_1c==0){$("#d_centro_procedimientos").css("display","none");$("#fondo_negro_procedimientos").css("display","none");}}};function buscarProcedimiento(){$("#frmBuscarProcedimiento").validate({rules:{txtParametro:{required:true,},},submitHandler:function(){var _1e=$("#txtProcedimiento").val();var _1f="opcion=7&parametro="+str_encode(_1e);llamarAjax("tipos_citas_ajax.php",_1f,"procedimientos","muestraBtnEliminarProcedimiento();");return false;},});};function ocultaBtnEliminarProcedimiento(){$("#btnEliminarProcedimiento").css({"display":"none"});};function muestraBtnEliminarProcedimiento(){$("#btnEliminarProcedimiento").css({"display":"block"});};function seleccionarEstadoAtencion(_20){if(_20==1){$("#fondo_negro_procedimientos").css("display","block");$("#d_centro_procedimientos").slideDown(400).css({"display":"block","z-index":"10"});$("#d_interno_procedimientos").css({"min-height":"470px"});var _21="opcion=8";llamarAjax("tipos_citas_ajax.php",_21,"d_interno_procedimientos","");}else{if(_20==0){$("#d_centro_procedimientos").css("display","none");$("#fondo_negro_procedimientos").css("display","none");}}};function seleccionarTipoRegistro(_22){if(_22==1){$("#fondo_negro_procedimientos").css("display","block");$("#d_centro_procedimientos").slideDown(400).css({"display":"block","z-index":"10"});$("#d_interno_procedimientos").css({"min-height":"470px"});var _23="opcion=9";llamarAjax("tipos_citas_ajax.php",_23,"d_interno_procedimientos","");}else{if(_22==0){$("#d_centro_procedimientos").css("display","none");$("#fondo_negro_procedimientos").css("display","none");}}};function guardarTipoCitaDetalle(_24,_25){var _26=$("#txtOrden").val();var _27=$("#hdd_EstadoAtencion").val();var _28=$("#hdd_Procedimiento").val();var _29=$("#cmb_usuarioAlt").val();if(_26==""){alert("Debe ingresar un valor en el campo: Orden");}else{if(_26=="0"){alert("El valor 0 no es permitido en el campo: Orden");}else{if(_29==""){alert("Error!. Seleccione el campo: Atiende otro usuario profesional.");}else{var _2a=$("#tablaTiposCitaDetalles tr").length;var _2b=false;for(i=2;i<=(_2a-1);i++){if($("#hdd_TipoRegistro").val()==$("#tablaTiposCitaDetalles tr:eq("+i+")").attr("id")){if($("#txtOrden").val()==$.trim($("#tablaTiposCitaDetalles tr:eq("+i+") #orden").html())){_2b=true;break;}else{_2b=true;}}else{if($("#hdd_TipoRegistro").val()!=$("#tablaTiposCitaDetalles tr:eq("+i+")").attr("id")){if($("#txtOrden").val()==$.trim($("#tablaTiposCitaDetalles tr:eq("+i+") #orden").html())){alert("Debe seleccionar otro numero de orden");_2b=false;break;}else{_2b=true;}}}}if(_2b){var _2c="opcion=10&idCita="+_24+"&idDetalle="+_25+"&accion=3&estadoAtencion="+_27+"&procedimiento="+_28+"&orden="+str_encode(_26)+"&usuarioAlt="+_29;llamarAjax("tipos_citas_ajax.php",_2c,"hdd_resultado_agregar","postEliminarTipoCitaDetalle("+_24+")");}}}}};function nuevoTipoCitaDetalle(_2d){var _2e=$("#txtOrden").val();var _2f=$("#hdd_TipoRegistro").val();var _30=$("#hdd_EstadoAtencion").val();var _31=$("#hdd_Procedimiento").val();var _32=$("#cmb_usuarioAlt").val();if(_2e==""){alert("Debe ingresar un valor en el campo: Orden");}else{if(_2e=="0"){alert("El valor 0 no es permitido en el campo: Orden");}else{if(_30==""){alert("Debe seleccionar el Estado de atencion");}else{if(_2f==""){alert("Debe seleccionar el Tipo de registro");}else{if(_32==""){alert("Error!. Seleccione el campo: Atiende otro usuario profesional.");}else{var _33=$("#tablaTiposCitaDetalles tr").length;var _34=false;for(i=2;i<=(_33-1);i++){if($("#hdd_TipoRegistro").val()==$("#tablaTiposCitaDetalles tr:eq("+i+")").attr("id")){alert("Error! El tipo de registro ya existe");break;}else{if($("#hdd_TipoRegistro").val()!=$("#tablaTiposCitaDetalles tr:eq("+i+")").attr("id")){if($("#txtOrden").val()==$.trim($("#tablaTiposCitaDetalles tr:eq("+i+") #orden").html())){alert("Debe seleccionar otro numero de orden");_34=false;break;}else{_34=true;}}}}if(_34){var _35="opcion=10&idCita="+_2d+"&idDetalle="+_2f+"&accion=1&estadoAtencion="+_30+"&procedimiento="+_31+"&orden="+str_encode(_2e)+"&usuarioAlt="+_32;llamarAjax("tipos_citas_ajax.php",_35,"hdd_resultado_agregar","postEliminarTipoCitaDetalle("+_2d+")");}}}}}}};function agregarTipoRegistroHC(id,_36){$("#txtTipoRegistro").text(_36);$("#hdd_TipoRegistro").val(id);seleccionarProcedimiento(0);};function eliminarTipoCitaDetalle(_37,_38){if(confirm("Desea eliminar el elemento?")){var _39="opcion=10&idCita="+_37+"&idDetalle="+_38+"&accion=2&estadoAtencion=&procedimiento=&orden=&usuarioAlt=";llamarAjax("tipos_citas_ajax.php",_39,"hdd_resultado_agregar","postEliminarTipoCitaDetalle("+_37+")");}};function postEliminarTipoCitaDetalle(_3a){if($("#hdd_resultado_agregar").text()=="1"){cerrar_div_centro();muestraTipoCita(_3a);}else{if($("#hdd_resultado_agregar").text()=="-1"){alert("Error interno del servidor. Intentar de nuevo");}}};function muestraTipoCita(id){$("#contenedor_error").css("display","none");$("#contenedor_exito").css("display","none");var _3b="opcion=4&idTipoCita="+id;llamarAjax("tipos_citas_ajax.php",_3b,"reporte_citas","postMuestraTipoCita();");};function postMuestraTipoCita(){if($("#indPreq").is(":checked")){$("#cmb_tipos_registros_hc").attr("disabled",false);}else{$("#cmb_tipos_registros_hc").attr("disabled","disabled");}};function agregarEstadosAtencion(_3c,_3d){$("#txtEstadoAtencion").text(_3d);$("#hdd_EstadoAtencion").val(_3c);seleccionarProcedimiento(0);};function agregarProcedimiento(_3e,_3f){$("#txtProcedimientos").text(_3f);$("#hdd_Procedimiento").val(_3e);seleccionarProcedimiento(0);};function eliminarProcedimiento(){if(confirm("Desea eliminar el procedimiento?")){$("#txtProcedimientos").text("");$("#hdd_Procedimiento").val("");ocultaBtnEliminarProcedimiento();}};function seleccionar_preqx(){if($("#chk_preqx").is(":checked")){$("#cmb_tipo_reg_cx").attr("disabled",false);}else{$("#cmb_tipo_reg_cx").attr("disabled","disabled");}};