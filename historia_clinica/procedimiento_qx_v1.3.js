function seleccionar_reoperacion(_1){if(_1=="1"){$("#cmb_reop_ent").prop("disabled",false);$("#txt_fecha_cx_ant").prop("disabled",false);}else{$("#cmb_reop_ent").prop("disabled",true);$("#cmb_reop_ent").val("");$("#txt_fecha_cx_ant").prop("disabled",true);$("#txt_fecha_cx_ant").val("");}};function mostrar_agregar_procedimiento(){$("#d_centro").css({"top":"50px;"});$("#fondo_negro").css("display","block");$("#d_centro").slideDown(400).css("display","block");var _2="opcion=1";llamarAjax("procedimiento_qx_ajax.php",_2,"d_interno","");};function validar_buscar_procedimientos(){$("#frmBuscarProcedimiento").validate({debug:false,rules:{txt_identificacion_interno:{required:true,},},submitHandler:function(_3){buscar_procedimientos();return false;}});};function buscar_procedimientos(){var _4="opcion=2&parametro="+str_encode($("#txt_identificacion_interno").val());llamarAjax("procedimiento_qx_ajax.php",_4,"d_procedimientos_b","");};function seleccionar_procedimiento(_5){var _6=parseInt($("#hdd_cant_procedimientos").val(),10);if(_6<=50){$("#td_cod_procedimiento_"+_6).html($("#hdd_cod_procedimiento_b_"+_5).val());$("#td_nombre_procedimiento_"+_6).html($("#hdd_nombre_procedimiento_b_"+_5).val());$("#hdd_cod_procedimiento_"+_6).val($("#hdd_cod_procedimiento_b_"+_5).val());$("#tr_proc_cx_"+_6).css("display","");_6++;$("#hdd_cant_procedimientos").val(_6);}else{alert("L?mite de procedimientos quir?rgicos alcanzado");}cerrar_div_centro();};function quitar_procedimiento(_7){$("#td_cod_procedimiento_"+_7).html("");$("#td_nombre_procedimiento_"+_7).html("");$("#cmb_ojo_"+_7).val("");$("#cmb_via_"+_7).val("");$("#hdd_cod_procedimiento_"+_7).val("");$("#tr_proc_cx_"+_7).css("display","none");var _8=parseInt($("#hdd_cant_procedimientos").val(),10);if(_7+1==_8){_8--;$("#hdd_cant_procedimientos").val(_8);}};function guardar_cirugia(_9,_a){$("#contenedor_error").css("display","none");limpiar_bordes();switch(_9){case 1:case 3:if(validar_cirugia()){editar_cirugia(_9);}else{$("#contenedor_error").css("display","block");$("#contenedor_error").html("Los campos marcados en rojo son obligatorios");window.scrollTo(0,0);}break;case 2:if(validar_archivo_cx()){editar_cirugia(_9);}break;}if(_a==1){setTimeout("imprimir_cirugia()",1000);}};function imprimir_cirugia(){var _b="id_hc="+$("#hdd_id_hc").val();llamarAjax("../historia_clinica/impresion_historia_clinica.php",_b,"d_impresion_hc","imprSelec(\"d_impresion_hc\")");};function limpiar_bordes(){$("#txt_fecha_cx").css({"border":"1px solid rgba(0,0,0,.2)"});$("#cmb_convenio").css({"border":"1px solid rgba(0,0,0,.2)"});$("#cmb_amb_rea").css({"border":"1px solid rgba(0,0,0,.2)"});$("#cmb_fin_pro").css({"border":"1px solid rgba(0,0,0,.2)"});$("#cmb_usuario_prof").css({"border":"1px solid rgba(0,0,0,.2)"});$("#cmb_reoperacion").css({"border":"1px solid rgba(0,0,0,.2)"});$("#cmb_reop_ent").css({"border":"1px solid rgba(0,0,0,.2)"});$("#fil_arch_cx").css({"border":"1px solid rgba(0,0,0,.2)"});var _c=parseInt($("#hdd_cant_procedimientos").val(),10);for(var i=0;i<_c;i++){$("#cmb_ojo_"+i).css({"border":"1px solid rgba(0,0,0,.2)"});$("#cmb_via_"+i).css({"border":"1px solid rgba(0,0,0,.2)"});}};function validar_cirugia(){var _d=true;var _e=0;var _f=0;var _10=0;$("#panel_proce_1").removeClass("borde_error_panel");$("#panel_proce_1 a").css({"color":"#5B5B5B"});$("#panel_proce_2").removeClass("borde_error_panel");$("#panel_proce_2 a").css({"color":"#5B5B5B"});$("#panel_proce_3").removeClass("borde_error_panel");$("#panel_proce_3 a").css({"color":"#5B5B5B"});if($("#txt_fecha_cx").val()==""){$("#txt_fecha_cx").css({"border":"2px solid #FF002A"});_d=false;_e=1;}if($("#cmb_convenio").val()==""){$("#cmb_convenio").css({"border":"2px solid #FF002A"});_d=false;_e=1;}if($("#cmb_amb_rea").val()==""){$("#cmb_amb_rea").css({"border":"2px solid #FF002A"});_d=false;_e=1;}if($("#cmb_fin_pro").val()==""){$("#cmb_fin_pro").css({"border":"2px solid #FF002A"});_d=false;_e=1;}if($("#cmb_usuario_prof").val()==""){$("#cmb_usuario_prof").css({"border":"2px solid #FF002A"});_d=false;_e=1;}if($("#cmb_reoperacion").val()==""){$("#cmb_reoperacion").css({"border":"2px solid #FF002A"});_d=false;_e=1;}else{if($("#cmb_reoperacion").val()=="1"){if($("#cmb_reop_ent").val()==""){$("#cmb_reop_ent").css({"border":"2px solid #FF002A"});_d=false;_e=1;}}}var _11=parseInt($("#hdd_cant_procedimientos").val(),10);for(var i=0;i<_11;i++){if($("#tr_proc_cx_"+i).is(":visible")&&$("#hdd_cod_procedimiento_"+i).val()!=""){if($("#cmb_ojo_"+i).val()==""){$("#cmb_ojo_"+i).css({"border":"2px solid #FF002A"});_d=false;_e=1;}if($("#cmb_via_"+i).val()==""){$("#cmb_via_"+i).css({"border":"2px solid #FF002A"});_d=false;_e=1;}}}var _12=parseInt($("#lista_tabla").val(),10);for(i=1;i<=_12;i++){var _13=$("#hdd_ciex_diagnostico_"+i).val();var _14=$("#valor_ojos_"+i).val();if(_13!=""&&_14==""){$("#valor_ojos_"+i).css({"border":"2px solid #FF002A"});_d=false;_10=1;}}if(_d){_d=validar_archivo_cx();}if(_e==1){$("#panel_proce_1").addClass("borde_error_panel");$("#panel_proce_1 a").css({"color":"#FF002A"});}if(_f==1){$("#panel_proce_2").addClass("borde_error_panel");$("#panel_proce_2 a").css({"color":"#FF002A"});}if(_10==1){$("#panel_proce_3").addClass("borde_error_panel");$("#panel_proce_3 a").css({"color":"#FF002A"});}return _d;};function validar_archivo_cx(){var _15=true;var _16=$("#fil_arch_cx").val();if(_16!=""){var _17=obtener_extension_archivo(_16);if(_17!="jpg"&&_17!="png"&&_17!="bmp"&&_17!="gif"&&_17!="pdf"){$("#fil_arch_cx").css({"border":"2px solid #FF002A"});_15=false;}}if(!_15){alert("Los archivos a cargar deben ser im?genes o archivos pdf");}return _15;};function editar_cirugia(_18){var _19=$("#hdd_id_admision").val();var _1a="opcion=3&id_hc="+$("#hdd_id_hc").val()+"&id_admision="+$("#hdd_id_admision").val()+"&tipo_guardar="+_18+"&fecha_cx="+$("#txt_fecha_cx").val()+"&id_convenio="+$("#cmb_convenio").val()+"&id_amb_rea="+$("#cmb_amb_rea").val()+"&id_fin_pro="+$("#cmb_fin_pro").val()+"&id_usuario_prof="+$("#cmb_usuario_prof").val()+"&ind_reoperacion="+$("#cmb_reoperacion").val()+"&ind_reop_ent="+$("#cmb_reop_ent").val()+"&fecha_cx_ant="+$("#txt_fecha_cx_ant").val()+"&observaciones_cx="+str_encode($("#txt_observaciones_cx").val())+"&arch_cx="+$("#fil_arch_cx").val()+"&arch_stickers="+$("#fil_hoja_stickers").val();var _1b=parseInt($("#hdd_cant_procedimientos").val(),10);_1a+="&cant_procedimientos="+_1b;for(var i=0;i<_1b;i++){if(document.getElementById("tr_proc_cx_"+i).style.display!="none"&&$("#hdd_cod_procedimiento_"+i).val()!=""){_1a+="&cod_procedimiento_"+i+"="+$("#hdd_cod_procedimiento_"+i).val()+"&id_ojo_"+i+"="+$("#cmb_ojo_"+i).val()+"&via_"+i+"="+$("#cmb_via_"+i).val();}}var _1c=parseInt($("#lista_tabla").val(),10);_1a+="&cant_ciex="+_1c;for(var i=1;i<=_1c;i++){var _1d=$("#hdd_ciex_diagnostico_"+i).val();var _1e=$("#valor_ojos_"+i).val();if(_1d!=""){_1a+="&cod_ciex_"+i+"="+_1d+"&val_ojos_"+i+"="+_1e;}}llamarAjax("procedimiento_qx_ajax.php",_1a,"d_guardar_cx","validar_exito("+_18+");");};function validar_exito(_1f){var _20=$("#hdd_resul_guardar").val();if(_20>0){$("#contenedor_exito").css("display","block");$("#contenedor_exito").html("Datos guardados correctamente");$("#hdd_id_hc").val(_20);$("#hdd_id_hc_cx").val(_20);$("#hdd_id_hc_stickers").val(_20);subir_archivo_cx(true);subir_archivo_stickers(true);switch(_1f){case 1:setTimeout("parent.cerrar_div_centro();",1000);break;case 2:case 3:setTimeout("$(\"#contenedor_exito\").css(\"display\", \"none\")",2000);break;}}else{$("#contenedor_error").css("display","block");$("#contenedor_error").html("Error interno al guardar la cirug&iacute;a");}window.scrollTo(0,0);};function obtener_ruta_valida(_21){var _22=$("#"+_21).val();var _23=obtener_extension_archivo(_22);if(_23!="jpg"&&_23!="png"&&_23!="bmp"&&_23!="gif"&&_23!="pdf"){_22="";}return _22;};function subir_archivo_cx(_24){var _25=obtener_ruta_valida("fil_arch_cx");if(_25!=""){$("#frm_arch_cx").submit();if(_24){document.getElementById("d_archivo_cx").innerHTML="";cargar_archivo(3000,2);}}};function subir_archivo_stickers(_26){var _27=obtener_ruta_valida("fil_hoja_stickers");if(_27!=""){$("#frm_arch_stickers").submit();if(_26){document.getElementById("d_archivo_stickers").innerHTML="";cargar_archivo(3000,1);}}};function cargar_archivo(_28,_29){switch(_29){case 1:var _2a="opcion=7&id_hc="+$("#hdd_id_hc").val();if(_28>0){setTimeout(function(){llamarAjax("procedimiento_qx_ajax.php",_2a,"d_archivo_stickers","");},_28);}else{llamarAjax("procedimiento_qx_ajax.php",_2a,"d_archivo_stickers","");}break;case 2:var _2a="opcion=5&id_hc="+$("#hdd_id_hc").val();if(_28>0){setTimeout(function(){llamarAjax("procedimiento_qx_ajax.php",_2a,"d_archivo_cx","");},_28);}else{llamarAjax("procedimiento_qx_ajax.php",_2a,"d_archivo_cx","");}break;}};